<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>leakr - R Package</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <nav class="navbar">
        <div class="container">
            <a href="index.html" class="nav-brand">Cheryl Isabella</a>
            <div class="nav-links">
                <a href="vangogh.html">vangogh</a>
                <a href="leakr.html" class="active">leakr</a>
                <a href="https://github.com/cherylisabella" target="_blank">GitHub</a>
            </div>
        </div>
    </nav>

    <div class="container doc-page">
        <div class="doc-header">
            <h1>üîç leakr</h1>
            <p class="doc-subtitle">Data Leakage Detection for Machine Learning Workflows</p>
            <div class="doc-badges">
                <a href="https://github.com/cherylisabella/leakr" class="badge" target="_blank">GitHub</a>
                <a href="https://cran.r-project.org/package=leakr" class="badge" target="_blank">CRAN</a>
            </div>
        </div>

        <div class="doc-content">
            <section>
                <h2>Overview</h2>
                <p>A comprehensive R package for detecting and diagnosing data leakage in machine learning workflows. Data leakage undermines model validity by allowing information from outside the training dataset to influence model development.</p>
            </section>

            <section>
                <h2>What leakr Detects</h2>
                <ul class="features">
                    <li><strong>Train/test contamination:</strong> Overlapping observations between training and testing sets</li>
                    <li><strong>Target leakage:</strong> Features with suspicious relationships to the target variable</li>
                    <li><strong>Temporal leakage:</strong> Using future information to predict the past in time-series data</li>
                    <li><strong>Duplicate records:</strong> Exact and near-duplicate rows that can inflate performance metrics</li>
                </ul>
            </section>

            <section>
                <h2>Installation</h2>
                <p>Install from CRAN:</p>
                <pre class="code-block">install.packages("leakr")</pre>
                
                <p>Or install the development version from GitHub:</p>
                <pre class="code-block">devtools::install_github("cherylisabella/leakr")</pre>
            </section>

            <section>
                <h2>Quick Start</h2>
                <pre class="code-block">library(leakr)

# Basic audit on iris dataset
report <- leakr_audit(iris, target = "Species")
print(report)

# Audit with custom configuration
report <- leakr_audit(
  data = iris,
  target = "Species",
  config = list(
    sample_size = 50000,
    correlation_threshold = 0.8,
    contamination_threshold = 0.1,
    plot_results = TRUE
  )
)

# View detailed summary
leakr_summarise(report, top_n = 10, show_config = TRUE)</pre>
            </section>

            <section>
                <h2>Key Features</h2>
                
                <h3>Automated Leakage Detection</h3>
                <pre class="code-block"># Comprehensive audit
report <- leakr_audit(
  data = my_data,
  target = "outcome",
  split = "split_column",
  id = "customer_id"
)

# Access report components
report$summary    # Issues dataframe with severity
report$evidence   # Detector-specific evidence
report$meta       # Metadata and configuration</pre>

                <h3>Train/Test Contamination</h3>
                <pre class="code-block"># Create detector
detector <- new_train_test_detector(threshold = 0.1)

# Run detector
result <- run_detector(
  detector = detector,
  data = my_data,
  split = split_vector,
  id = "customer_id"
)

# Check for overlaps
result$evidence$overlap_ids</pre>

                <h3>Temporal Leakage Detection</h3>
                <pre class="code-block"># Create temporal detector
detector <- new_temporal_detector(
  time_col = "transaction_date",
  lookahead_window = 7  # days
)

# Run detector
result <- run_detector(
  detector = detector,
  data = my_data,
  split = split_vector
)</pre>

                <h3>ML Framework Integration</h3>
                <pre class="code-block"># tidymodels
library(tidymodels)
leakr_data <- leakr_from_tidymodels(workflow, data = iris)

# mlr3
library(mlr3)
leakr_data <- leakr_from_mlr3(task, include_target = TRUE)

# caret
library(caret)
leakr_data <- leakr_from_caret(train_obj, original_data, "Species")</pre>
            </section>

            <section>
                <h2>Data Import/Export</h2>
                
                <h3>Flexible Import</h3>
                <pre class="code-block"># Auto-detect format from extension
data <- leakr_import("path/to/data.csv")

# Import with preprocessing
data <- leakr_import(
  "path/to/data.csv",
  preprocessing = list(
    remove_empty_rows = TRUE,
    remove_empty_cols = TRUE,
    clean_column_names = TRUE,
    handle_dates = TRUE,
    remove_constant_cols = TRUE
  )
)</pre>

                <h3>Supported Formats</h3>
                <ul class="features">
                    <li>CSV, TSV (Base R)</li>
                    <li>Excel (readxl)</li>
                    <li>RDS (Base R)</li>
                    <li>JSON (jsonlite)</li>
                    <li>Parquet (arrow)</li>
                </ul>

                <h3>Data Snapshots</h3>
                <pre class="code-block"># Create reproducible snapshot
snapshot_path <- leakr_create_snapshot(
  data = my_data,
  snapshot_name = "baseline_data",
  metadata = list(
    description = "Initial dataset",
    experiment_id = "EXP001"
  )
)

# Load snapshot
data <- leakr_load_snapshot("path/to/snapshot")

# List all snapshots
snapshots <- leakr_list_snapshots("data/snapshots")</pre>
            </section>

            <section>
                <h2>Visualization & Reporting</h2>
                <pre class="code-block"># Generate plots with audit
report <- leakr_audit(
  data = my_data,
  target = "outcome",
  config = list(plot_results = TRUE)
)

# Plot detector results
plot(result)

# Print formatted report
print(report)

# Detailed summary
leakr_summarise(report, top_n = 20, show_config = TRUE)</pre>
            </section>

            <section>
                <h2>Custom Detectors</h2>
                <p>Extend leakr with domain-specific detectors:</p>
                <pre class="code-block"># Define custom detector function
my_custom_detector <- function(audit_data, config) {
  # Your detection logic
  issues <- data.frame(
    severity = "high",
    issue_type = "custom_issue",
    description = "Found issue...",
    suggested_fix = "Fix suggestion..."
  )
  
  list(
    issues = issues,
    evidence = list(custom_data = "...")
  )
}

# Register the detector
register_detector(
  name = "custom_feature_check",
  fun = my_custom_detector,
  description = "Custom detector description"
)

# Use in audit
report <- leakr_audit(
  data = my_data,
  target = "outcome",
  detectors = c("train_test_contamination", "custom_feature_check")
)</pre>
            </section>

            <section>
                <h2>Best Practices</h2>
                
                <h3>When to Audit</h3>
                <ul class="features">
                    <li>‚úì Audit immediately after data splitting</li>
                    <li>‚úì Use unique identifiers when available</li>
                    <li>‚úì Configure thresholds based on your domain</li>
                    <li>‚úì Examine detailed evidence, not just summaries</li>
                </ul>

                <h3>Configuration Guidelines</h3>
                <pre class="code-block"># For financial/healthcare: Strict thresholds
config = list(
  correlation_threshold = 0.7,
  contamination_threshold = 0.01
)

# For exploratory analysis: Lenient thresholds
config = list(
  correlation_threshold = 0.95,
  contamination_threshold = 0.1
)</pre>
            </section>

            <section>
                <h2>Function Reference</h2>
                <table class="function-table">
                    <thead>
                        <tr>
                            <th>Function</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>leakr_audit()</code></td>
                            <td>Main function for comprehensive leakage detection</td>
                        </tr>
                        <tr>
                            <td><code>leakr_summarise()</code></td>
                            <td>Generate detailed summary of audit results</td>
                        </tr>
                        <tr>
                            <td><code>new_train_test_detector()</code></td>
                            <td>Create train/test contamination detector</td>
                        </tr>
                        <tr>
                            <td><code>new_temporal_detector()</code></td>
                            <td>Create temporal leakage detector</td>
                        </tr>
                        <tr>
                            <td><code>leakr_import()</code></td>
                            <td>Import data with auto-detection</td>
                        </tr>
                        <tr>
                            <td><code>leakr_export_data()</code></td>
                            <td>Export data to various formats</td>
                        </tr>
                        <tr>
                            <td><code>leakr_create_snapshot()</code></td>
                            <td>Create reproducible data snapshot</td>
                        </tr>
                        <tr>
                            <td><code>leakr_load_snapshot()</code></td>
                            <td>Load data snapshot</td>
                        </tr>
                        <tr>
                            <td><code>register_detector()</code></td>
                            <td>Register custom detector</td>
                        </tr>
                    </tbody>
                </table>
            </section>

            <section>
                <h2>Real-World Examples</h2>
                
                <h3>Fraud Detection</h3>
                <pre class="code-block">fraud_data <- data.frame(
  transaction_id = 1:1000,
  customer_id = sample(1:200, 1000, replace = TRUE),
  amount = round(rnorm(1000, 100, 50), 2),
  is_fraud = sample(0:1, 1000, replace = TRUE, prob = c(0.98, 0.02)),
  split = c(rep("train", 700), rep("test", 300))
)

report <- leakr_audit(
  data = fraud_data,
  target = "is_fraud",
  split = "split",
  id = "transaction_id"
)</pre>

                <h3>Customer Churn</h3>
                <pre class="code-block">report <- leakr_audit(
  data = customer_data,
  target = "churned",
  split = "split",
  id = "customer_id",
  detectors = c("train_test_contamination", "target_leakage")
)</pre>

                <h3>Time Series Forecasting</h3>
                <pre class="code-block">temporal_det <- new_temporal_detector(
  time_col = "date",
  lookahead_window = 30
)

temporal_result <- run_detector(
  temporal_det,
  timeseries_data,
  split = timeseries_data$split
)</pre>
            </section>

            <section>
                <h2>Contributing</h2>
                <p>Contributions are welcome! Areas where you can help:</p>
                <ul class="features">
                    <li>Add new detectors for domain-specific leakage patterns</li>
                    <li>Improve documentation and examples</li>
                    <li>Enhance visualizations and reporting</li>
                    <li>Optimize performance for large datasets</li>
                    <li>Add comprehensive test coverage</li>
                </ul>
                <p>See <a href="https://github.com/cherylisabella/leakr/blob/main/CONTRIBUTING.md" target="_blank">CONTRIBUTING.md</a> for detailed guidelines.</p>
            </section>

            <section>
                <h2>License</h2>
                <p>MIT License - see <a href="https://github.com/cherylisabella/leakr/blob/main/LICENSE.md" target="_blank">LICENSE</a> file for details.</p>
            </section>
        </div>
    </div>

    <footer>
        <div class="container">
            <p>Built with ‚ù§Ô∏è for the R community</p>
            <p style="margin-top: 0.5rem;">
                <a href="https://github.com/cherylisabella">GitHub Profile</a>
            </p>
        </div>
    </footer>
</body>
</html>
